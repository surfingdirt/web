<!DOCTYPE html>
<!-- Build Date: <%= new Date().toISOString() %> -->
<html lang="{{{ locale }}}" dir="{{{ dir }}}">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="fb:app_id" content="{{{ fbAppId }}}">
{{{ meta }}}

{{{ title }}}

    <link rel="icon" href="{{{ baseUrl }}}/favicon.ico">

    <link rel="apple-touch-icon" sizes="180x180" href="{{{ baseUrl }}}/apple-icon-180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="{{{ baseUrl }}}/apple-icon-167.png">
    <link rel="apple-touch-icon" sizes="152x152" href="{{{ baseUrl }}}/apple-icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="{{{ baseUrl }}}/apple-icon-120.png">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-startup-image"
          href="{{{ baseUrl }}}/apple-splash-2048-2732.png"
          media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image"
          href="{{{ baseUrl }}}/apple-splash-2732-2048.png"
          media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)">
    <link rel="apple-touch-startup-image"
          href="{{{ baseUrl }}}/apple-splash-1668-2388.png"


        <%= htmlWebpackPlugin.files.css.map(file => `<link href="${file}" rel="stylesheet" type="text/css" />`).join('') %>
{{{ css }}}
{{{ inlineStyle }}}
</head>
<body class="keyboard-mode {{{ agentBodyClass }}}">
<div id="app_root">{{{ html }}}</div>
{{{ js }}}
<%= htmlWebpackPlugin.files.js.map(file => `<script src="${file}"></script>`).join('') %>
<script>
  <!-- TODO: apply the technique from https://www.youtube.com/watch?v=ff4fgQxPaO0 -->
  window.staticAppContextValues = {{{ staticAppContextValues }}};

  window.__APOLLO_STATE__ = {{{ apolloState }}}

  window.main && window.main();
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id={{{ analyticsId }}}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{{ analyticsId }}}');

  (function() {
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker
        .register('{{{ baseUrl }}}/sw.js', { scope: '/' })
        .then(() => console.log('Service Worker registered successfully.'))
        .catch((error) => console.log('Service Worker registration failed:', error));
    }
  })();
</script>

</body>
</html>
